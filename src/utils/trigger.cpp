#include "trigger.h"
#include "uptime.h"
//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
trigger::trigger()
{
	active = false;
	lastTriggerTime = 0;
	duration = 0;
}
//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
trigger::~trigger()
{
	
}
//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
void trigger::start(uint32_t _duration)
{
	duration = _duration;
	lastTriggerTime = uptime();
	active = true;
}
//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
void trigger::stop()
{
	active = false;
}
//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
bool trigger::triggered()
{
	if(!active)
		return false;
	
	if(uptime() - lastTriggerTime >= duration)
	{
		lastTriggerTime = uptime();
		return true;
	}
	
	return false;
}
//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
